{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport axios from 'axios';\nvar GET_RESTAURANTS_SUCCESS = 'GET_RESTAURANTS_SUCCESS';\nvar GET_RESTAURANTS_FAILURE = 'GET_RESTAURANTS_FAILURE';\nexport default function restaurantReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case GET_RESTAURANTS_SUCCESS:\n      return _toConsumableArray(action.payload);\n\n    case GET_RESTAURANTS_FAILURE:\n      console.log('Restaurants loading error, check if backend is connected properly');\n      return state;\n\n    default:\n      return state;\n  }\n}\nexport function fetchRestaurantsSuccess(response) {\n  return {\n    type: GET_RESTAURANTS_SUCCESS,\n    payload: response.data\n  };\n}\nexport function fetchRestaurantsFailure() {\n  return {\n    type: GET_RESTAURANTS_FAILURE\n  };\n}\nexport function fetchRestaurants() {\n  var skip = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var regionFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var cuisineFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var priceFilter = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var search = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '';\n  var sortBy = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '';\n  var ascending = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n  var searchString = search ? \"&name=\" + search : '';\n  var sortString = sortBy ? \"&sort=\" + sortBy : '';\n  var ascendingString = ascending ? '' : 'DESC';\n  var skipInput = skip ? skip : 0;\n  var regionString = '';\n\n  for (var x = 0; x < regionFilter.length; x++) {\n    regionString += \"&region\" + (x === 0 ? '' : x) + \"=\" + regionFilter[x];\n  }\n\n  var cuisineString = '';\n\n  for (var i = 0; i < cuisineFilter.length; i++) {\n    cuisineString += \"&cuisine\" + (i === 0 ? '' : i) + \"=\" + cuisineFilter[i];\n  }\n\n  var priceString = '';\n\n  for (var _x = 0; _x < priceFilter.length; _x++) {\n    priceString += \"&price\" + (_x === 0 ? '' : _x) + \"=\" + priceFilter[_x];\n  }\n\n  return function (dispatch) {\n    return axios.get(\"http://10.22.40.247:8000/api/restaurant/filter/?skip=\" + (skipInput + regionString + cuisineString + priceString + searchString + sortString + ascendingString)).then(function (response) {\n      return dispatch(fetchRestaurantsSuccess(response));\n    }).catch(function (err) {\n      return dispatch(fetchRestaurantsFailure);\n    });\n  };\n}","map":{"version":3,"sources":["/Users/isabelslorer/Documents/Webutvikling/project-4/project-4/store/ducks/restaurantDuck.ts"],"names":["axios","GET_RESTAURANTS_SUCCESS","GET_RESTAURANTS_FAILURE","restaurantReducer","state","action","type","payload","console","log","fetchRestaurantsSuccess","response","data","fetchRestaurantsFailure","fetchRestaurants","skip","regionFilter","cuisineFilter","priceFilter","search","sortBy","ascending","searchString","sortString","ascendingString","skipInput","regionString","x","length","cuisineString","i","priceString","dispatch","get","then","catch","err"],"mappings":";AACA,OAAOA,KAAP,MAAkB,OAAlB;AAWA,IAAMC,uBAAuB,GAAG,yBAAhC;AACA,IAAMC,uBAAuB,GAAG,yBAAhC;AAIA,eAAe,SAASC,iBAAT,GAGb;AAAA,MAFAC,KAEA,uEAFuB,EAEvB;AAAA,MADAC,MACA;;AACA,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKL,uBAAL;AACE,gCAAWI,MAAM,CAACE,OAAlB;;AACF,SAAKL,uBAAL;AACEM,MAAAA,OAAO,CAACC,GAAR,CACE,mEADF;AAGA,aAAOL,KAAP;;AACF;AACE,aAAOA,KAAP;AATJ;AAWD;AAGD,OAAO,SAASM,uBAAT,CAAiCC,QAAjC,EAAgD;AACrD,SAAO;AACLL,IAAAA,IAAI,EAAEL,uBADD;AAELM,IAAAA,OAAO,EAAEI,QAAQ,CAACC;AAFb,GAAP;AAID;AAED,OAAO,SAASC,uBAAT,GAAmC;AACxC,SAAO;AACLP,IAAAA,IAAI,EAAEJ;AADD,GAAP;AAGD;AAED,OAAO,SAASY,gBAAT,GAQL;AAAA,MAPAC,IAOA,uEAPe,CAOf;AAAA,MANAC,YAMA,uEANyB,EAMzB;AAAA,MALAC,aAKA,uEAL0B,EAK1B;AAAA,MAJAC,WAIA,uEAJwB,EAIxB;AAAA,MAHAC,MAGA,uEAHiB,EAGjB;AAAA,MAFAC,MAEA,uEAFiB,EAEjB;AAAA,MADAC,SACA,uEADqB,IACrB;AACA,MAAMC,YAAY,GAAGH,MAAM,cAAYA,MAAZ,GAAuB,EAAlD;AACA,MAAMI,UAAU,GAAGH,MAAM,cAAYA,MAAZ,GAAuB,EAAhD;AACA,MAAMI,eAAe,GAAGH,SAAS,GAAG,EAAH,GAAQ,MAAzC;AACA,MAAMI,SAAS,GAAGV,IAAI,GAAGA,IAAH,GAAU,CAAhC;AAEA,MAAIW,YAAY,GAAG,EAAnB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,YAAY,CAACY,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CD,IAAAA,YAAY,iBAAcC,CAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,CAA7B,UAAkCX,YAAY,CAACW,CAAD,CAA1D;AACD;;AAED,MAAIE,aAAa,GAAG,EAApB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,aAAa,CAACW,MAAlC,EAA0CE,CAAC,EAA3C,EAA+C;AAC7CD,IAAAA,aAAa,kBAAeC,CAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,CAA9B,UAAmCb,aAAa,CAACa,CAAD,CAA7D;AACD;;AAED,MAAIC,WAAW,GAAG,EAAlB;;AACA,OAAK,IAAIJ,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGT,WAAW,CAACU,MAAhC,EAAwCD,EAAC,EAAzC,EAA6C;AAC3CI,IAAAA,WAAW,gBAAaJ,EAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,EAA5B,UAAiCT,WAAW,CAACS,EAAD,CAAvD;AACD;;AAGD,SAAO,UAACK,QAAD;AAAA,WACLhC,KAAK,CACFiC,GADH,4DAGMR,SAAS,GAAGC,YAAZ,GAA2BG,aAA3B,GAA2CE,WAA3C,GAA0DT,YAA1D,GAAyEC,UAAzE,GAAsFC,eAH5F,GAKGU,IALH,CAKQ,UAACvB,QAAD;AAAA,aAAcqB,QAAQ,CAACtB,uBAAuB,CAACC,QAAD,CAAxB,CAAtB;AAAA,KALR,EAMGwB,KANH,CAMS,UAACC,GAAD;AAAA,aAASJ,QAAQ,CAACnB,uBAAD,CAAjB;AAAA,KANT,CADK;AAAA,GAAP;AAQD","sourcesContent":["import { IRestaurant } from '../../../backend/models/Restaurant';\nimport axios from 'axios';\n\n// Types\n\nexport type RestaurantAction = {\n  type: string;\n  payload: IRestaurant[];\n};\n\n// Actions\n\nconst GET_RESTAURANTS_SUCCESS = 'GET_RESTAURANTS_SUCCESS';\nconst GET_RESTAURANTS_FAILURE = 'GET_RESTAURANTS_FAILURE';\n\n//Reducer\n\nexport default function restaurantReducer(\n  state: IRestaurant[] = [],\n  action: RestaurantAction\n) {\n  switch (action.type) {\n    case GET_RESTAURANTS_SUCCESS:\n      return [...action.payload];\n    case GET_RESTAURANTS_FAILURE:\n      console.log(\n        'Restaurants loading error, check if backend is connected properly'\n      );\n      return state;\n    default:\n      return state;\n  }\n}\n\n// Action creators\nexport function fetchRestaurantsSuccess(response: any) {\n  return {\n    type: GET_RESTAURANTS_SUCCESS,\n    payload: response.data,\n  };\n}\n\nexport function fetchRestaurantsFailure() {\n  return {\n    type: GET_RESTAURANTS_FAILURE,\n  };\n}\n\nexport function fetchRestaurants(\n  skip: number = 0,\n  regionFilter: string[] = [],\n  cuisineFilter: string[] = [],\n  priceFilter: string[] = [],\n  search: string = '',\n  sortBy: string = '',\n  ascending: boolean = true\n) {\n  const searchString = search ? `&name=${search}` : '';\n  const sortString = sortBy ? `&sort=${sortBy}` : '';\n  const ascendingString = ascending ? '' : 'DESC';\n  const skipInput = skip ? skip : 0;\n\n  let regionString = '';\n  for (let x = 0; x < regionFilter.length; x++) {\n    regionString += `&region${x === 0 ? '' : x}=${regionFilter[x]}`;\n  }\n\n  let cuisineString = '';\n  for (let i = 0; i < cuisineFilter.length; i++) {\n    cuisineString += `&cuisine${i === 0 ? '' : i}=${cuisineFilter[i]}`;\n  }\n  \n  let priceString = '';\n  for (let x = 0; x < priceFilter.length; x++) {\n    priceString += `&price${x === 0 ? '' : x}=${priceFilter[x]}`;\n  }\n\n\n  return (dispatch: Function) =>\n    axios\n      .get(\n        `http://10.22.40.247:8000/api/restaurant/filter/?skip=${\n          skipInput + regionString + cuisineString + priceString  + searchString + sortString + ascendingString}`\n      )\n      .then((response) => dispatch(fetchRestaurantsSuccess(response)))\n      .catch((err) => dispatch(fetchRestaurantsFailure));\n}"]},"metadata":{},"sourceType":"module"}