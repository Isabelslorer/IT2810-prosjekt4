{"ast":null,"code":"import axios from 'axios';\nvar COUNTER_UPDATE_SUCCESS = 'COUNTER_UPDATE_SUCCESS';\nvar COUNTER_UPDATE_FAILURE = 'COUNTER_UPDATE_FAILURE';\nexport default function counterReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case COUNTER_UPDATE_SUCCESS:\n      var newState = action.payload;\n      return newState;\n\n    case COUNTER_UPDATE_FAILURE:\n      console.log('Restaurant count loading error, check if backend is connected properly');\n      return state;\n\n    default:\n      return state;\n  }\n}\nexport function fetchCounterSuccess(response) {\n  return {\n    type: COUNTER_UPDATE_SUCCESS,\n    payload: Math.ceil(response.data / 20)\n  };\n}\nexport function fetchCounterFailure() {\n  return {\n    type: COUNTER_UPDATE_FAILURE\n  };\n}\nexport function updateCounter() {\n  var regionFilter = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var cuisineFilter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var priceFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var search = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n  var searchString = search ? \"&name=\" + search : '';\n  var regionString = '';\n\n  for (var x = 0; x < regionFilter.length; x++) {\n    regionString += \"&region\" + (x === 0 ? '' : x) + \"=\" + regionFilter[x];\n  }\n\n  var cuisineString = '';\n\n  for (var i = 0; i < cuisineFilter.length; i++) {\n    cuisineString += \"&cuisine\" + (i === 0 ? '' : i) + \"=\" + cuisineFilter[i];\n  }\n\n  var priceString = '';\n\n  for (var _x = 0; _x < priceFilter.length; _x++) {\n    priceString += \"&price\" + (_x === 0 ? '' : _x) + \"=\" + priceFilter[_x];\n  }\n\n  return function (dispatch) {\n    axios.get(\"http://localhost:8000/api/counter/?\" + (+regionString + cuisineString + priceString + searchString)).then(function (response) {\n      return dispatch(fetchCounterSuccess(response));\n    }).catch(function (err) {\n      return dispatch(fetchCounterFailure);\n    });\n  };\n}","map":{"version":3,"sources":["C:/Users/Benedicte/VisualStudioCodeProjects/Prosjekt 4/prosjekt-4/project-4/store/ducks/counterDuck.ts"],"names":["axios","COUNTER_UPDATE_SUCCESS","COUNTER_UPDATE_FAILURE","counterReducer","state","action","type","newState","payload","console","log","fetchCounterSuccess","response","Math","ceil","data","fetchCounterFailure","updateCounter","regionFilter","cuisineFilter","priceFilter","search","searchString","regionString","x","length","cuisineString","i","priceString","dispatch","get","then","catch","err"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAYA,IAAMC,sBAAsB,GAAG,wBAA/B;AACA,IAAMC,sBAAsB,GAAG,wBAA/B;AAIA,eAAe,SAASC,cAAT,GAAkE;AAAA,MAA1CC,KAA0C,uEAA1B,CAA0B;AAAA,MAAvBC,MAAuB;;AAC/E,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKL,sBAAL;AACE,UAAMM,QAAQ,GAAGF,MAAM,CAACG,OAAxB;AACA,aAAOD,QAAP;;AACA,SAAKL,sBAAL;AACEO,MAAAA,OAAO,CAACC,GAAR,CACI,wEADJ;AAGE,aAAON,KAAP;;AACN;AACE,aAAOA,KAAP;AAVJ;AAYD;AAID,OAAO,SAASO,mBAAT,CAA6BC,QAA7B,EAA4C;AAC/C,SAAO;AACLN,IAAAA,IAAI,EAAEL,sBADD;AAELO,IAAAA,OAAO,EAAEK,IAAI,CAACC,IAAL,CAAUF,QAAQ,CAACG,IAAT,GAAc,EAAxB;AAFJ,GAAP;AAID;AAED,OAAO,SAASC,mBAAT,GAA+B;AACpC,SAAO;AACLV,IAAAA,IAAI,EAAEJ;AADD,GAAP;AAGD;AAIH,OAAO,SAASe,aAAT,GAKH;AAAA,MAJAC,YAIA,uEAJyB,EAIzB;AAAA,MAHAC,aAGA,uEAH0B,EAG1B;AAAA,MAFAC,WAEA,uEAFwB,EAExB;AAAA,MADAC,MACA,uEADiB,EACjB;AAEA,MAAMC,YAAY,GAAGD,MAAM,cAAYA,MAAZ,GAAuB,EAAlD;AAEA,MAAIE,YAAY,GAAG,EAAnB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGN,YAAY,CAACO,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC5CD,IAAAA,YAAY,iBAAcC,CAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,CAA7B,UAAkCN,YAAY,CAACM,CAAD,CAA1D;AACD;;AAED,MAAIE,aAAa,GAAG,EAApB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGR,aAAa,CAACM,MAAlC,EAA0CE,CAAC,EAA3C,EAA+C;AAC7CD,IAAAA,aAAa,kBAAeC,CAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,CAA9B,UAAmCR,aAAa,CAACQ,CAAD,CAA7D;AACD;;AAED,MAAIC,WAAW,GAAG,EAAlB;;AACA,OAAK,IAAIJ,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGJ,WAAW,CAACK,MAAhC,EAAwCD,EAAC,EAAzC,EAA6C;AAC3CI,IAAAA,WAAW,gBAAaJ,EAAC,KAAK,CAAN,GAAU,EAAV,GAAeA,EAA5B,UAAiCJ,WAAW,CAACI,EAAD,CAAvD;AACD;;AACH,SAAQ,UAACK,QAAD,EAAwB;AAC9B7B,IAAAA,KAAK,CAAC8B,GAAN,0CAEI,CAAEP,YAAF,GAAiBG,aAAjB,GAAiCE,WAAjC,GAAgDN,YAFpD,GAICS,IAJD,CAIM,UAACnB,QAAD;AAAA,aAAciB,QAAQ,CAAClB,mBAAmB,CAACC,QAAD,CAApB,CAAtB;AAAA,KAJN,EAKCoB,KALD,CAKO,UAACC,GAAD;AAAA,aAASJ,QAAQ,CAACb,mBAAD,CAAjB;AAAA,KALP;AAOD,GARD;AASD","sourcesContent":["import axios from 'axios';\r\n\r\n// Types\r\n\r\nexport type counterAction = {\r\n    type: string;\r\n    payload: number;\r\n  };\r\n  \r\n\r\n// Actions\r\n\r\nconst COUNTER_UPDATE_SUCCESS = 'COUNTER_UPDATE_SUCCESS';\r\nconst COUNTER_UPDATE_FAILURE = 'COUNTER_UPDATE_FAILURE';\r\n\r\n\r\n// Reducer\r\nexport default function counterReducer(state: number = 0, action: counterAction) {\r\n  switch (action.type) {\r\n    case COUNTER_UPDATE_SUCCESS:\r\n      const newState = action.payload;\r\n      return newState;\r\n      case COUNTER_UPDATE_FAILURE:\r\n        console.log(\r\n            'Restaurant count loading error, check if backend is connected properly'\r\n          );\r\n          return state;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n// Action creator\r\n\r\nexport function fetchCounterSuccess(response: any) {\r\n    return {\r\n      type: COUNTER_UPDATE_SUCCESS,\r\n      payload: Math.ceil(response.data/20),\r\n    };\r\n  }\r\n  \r\n  export function fetchCounterFailure() {\r\n    return {\r\n      type: COUNTER_UPDATE_FAILURE,\r\n    };\r\n  }\r\n  \r\n\r\n\r\nexport function updateCounter(\r\n    regionFilter: string[] = [],\r\n    cuisineFilter: string[] = [],\r\n    priceFilter: string[] = [],\r\n    search: string = '',\r\n  ) {\r\n\r\n    const searchString = search ? `&name=${search}` : '';\r\n  \r\n    let regionString = '';\r\n    for (let x = 0; x < regionFilter.length; x++) {\r\n      regionString += `&region${x === 0 ? '' : x}=${regionFilter[x]}`;\r\n    }\r\n  \r\n    let cuisineString = '';\r\n    for (let i = 0; i < cuisineFilter.length; i++) {\r\n      cuisineString += `&cuisine${i === 0 ? '' : i}=${cuisineFilter[i]}`;\r\n    }\r\n    \r\n    let priceString = '';\r\n    for (let x = 0; x < priceFilter.length; x++) {\r\n      priceString += `&price${x === 0 ? '' : x}=${priceFilter[x]}`;\r\n    }\r\n  return  (dispatch: Function) => {\r\n    axios.get(\r\n      `http://localhost:8000/api/counter/?${\r\n        + regionString + cuisineString + priceString  + searchString }`\r\n    )\r\n    .then((response) => dispatch(fetchCounterSuccess(response)))\r\n    .catch((err) => dispatch(fetchCounterFailure));\r\n\r\n  };\r\n}"]},"metadata":{},"sourceType":"module"}